# z-index（重なり順の制御）

**学習日：** 2025/06/08  
**カテゴリ：** HTML / CSS

## 📖 概要
HTML要素の**重なり順**を制御するためのCSSプロパティ。  
数字を指定することで、要素の前後関係（レイヤー順）をコントロールできる。

## 🔍 詳細内容

### z-index
**役割・定義：**
- 要素同士が重なったとき、どちらが**手前に表示されるか**を決めるプロパティ。
- 数字が大きいほど手前に表示される。

**使用場面：**
- 背景の上にテキストやボタンを重ねたい時。
- モーダルウィンドウ（ポップアップ）を最前面に出したい時。
- メニューを画像より前に出したい時。

**コード例：**
```html
<div class="cell">
  <!-- 画像とラベルを重ねるための親コンテナ -->
  <img src="photo.jpg" class="photo">
  <!-- 写真の上に重ねたいテキスト -->
  <div class="label">動物</div>
</div>
```

```css
.cell {
  position: relative; /* 重ねるために基準となる親にposition: relative */
  width: 100%;
  padding-top: 100%; /* 正方形を作るため */
  overflow: hidden;
}

.photo {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  z-index: 1; /* 画像は下に配置 */
}

.label {
  position: absolute;
  bottom: 0;
  width: 100%;
  background: rgba(0, 0, 0, 0.5); /* 半透明の黒背景 */
  color: white;
  font-size: 14px;
  z-index: 2; /* ラベルを画像より手前に */
}
```

**ポイント：**
- **positionが設定されていないとz-indexは効かない。**  
  → 必ず `position: relative`, `absolute`, `fixed`, `sticky` のどれかを指定する。
- **z-indexは数字が大きい方が手前。**  
  → `z-index: 9999` とかにすると最前面にできる（モーダルとかでよく使う）。
- **同じz-index同士はHTMLの記述順で重なり順が決まる。**
- **z-indexの数字の決め方：**  
  - 基本は要素の数に合わせて順番に 1, 2, 3…と増やしてOK。
  - たくさん重なるページでは、間を空けて（100, 200, 300…）設定しておくとあとから間に差し込みやすい。

## 💡 学んだこと・気づき
- 画像を入れるとテキストが消えてしまう問題は、**z-indexで重なり順を制御**することで解決できた。
- `position`を指定しないとz-indexが効かないのに最初気づかなかった。→ `position: relative` と `absolute` をセットで使うのがポイントだった。
- モーダル、ドロップダウンメニュー、オーバーレイなど、今後レイヤー構造が必要なUIで積極的に活用できる。
- **z-indexは基本、要素の数だけ番号をつければよいが、後から調整が必要になる場面を考えて、10・20・30など間を空けて設計するのもアリ。**
